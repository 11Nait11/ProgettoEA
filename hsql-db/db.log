/*C13*/SET SCHEMA PUBLIC
drop table if exists image cascade 
drop table if exists prodotto cascade 
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=469
INSERT INTO LOB_IDS VALUES(469,3,0,30)
DELETE FROM LOB_IDS WHERE LOB_ID=470
INSERT INTO LOB_IDS VALUES(470,3,0,30)
DELETE FROM LOB_IDS WHERE LOB_ID=471
INSERT INTO LOB_IDS VALUES(471,3,0,30)
COMMIT
SET SCHEMA PUBLIC
drop table if exists recensione cascade 
drop table if exists utente cascade 
drop sequence image_seq if exists
drop sequence recensione_seq if exists
drop sequence utente_seq if exists
create sequence image_seq start with 1 increment by 50
create sequence recensione_seq start with 1 increment by 50
create sequence utente_seq start with 1 increment by 50
create table image (id bigint not null, image blob, primary key (id))
create table prodotto (id bigint generated by default as identity (start with 1), categoria varchar(255), condizione varchar(255), descrizione varchar(255), disponibilita varchar(255), immagine blob, nome_prodotto varchar(255), prezzo float(53) not null, venditore bigint not null, primary key (id))
create table recensione (id bigint not null, utente_id bigint not null, primary key (id))
create table utente (id bigint not null, cognome varchar(255), nome varchar(255), primary key (id))
alter table prodotto add constraint FK2kslg4c4wonq14gof16ikj8dx foreign key (venditore) references utente
alter table recensione add constraint FKb77d6048y1xbjljw1aaew6dt9 foreign key (utente_id) references utente
INSERT INTO UTENTE VALUES(1,'Bianchi','Paperino')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 51
COMMIT
INSERT INTO UTENTE VALUES(2,'Rossi','Archimede')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 101
COMMIT
/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO LOB_IDS VALUES(472,3,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 473
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=763
INSERT INTO BLOCKS VALUES(763,1,0)
INSERT INTO BLOCKS VALUES(764,2147482883,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=763
INSERT INTO LOBS VALUES(763,1,0,472)
COMMIT
/*C13*/INSERT INTO PRODOTTO VALUES(1,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile',472,'Maglietta',19.99E0,1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=472
INSERT INTO LOB_IDS VALUES(472,3,1,30)
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(473,3,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 474
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=764
INSERT INTO BLOCKS VALUES(764,1,0)
INSERT INTO BLOCKS VALUES(765,2147482882,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=764
INSERT INTO LOBS VALUES(764,1,0,473)
COMMIT
/*C13*/SET SCHEMA PUBLIC
INSERT INTO PRODOTTO VALUES(2,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile',473,'Maglietta2',19.99E0,2)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=473
INSERT INTO LOB_IDS VALUES(473,3,1,30)
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(474,3,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 475
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=765
INSERT INTO BLOCKS VALUES(765,1,0)
INSERT INTO BLOCKS VALUES(766,2147482881,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=765
INSERT INTO LOBS VALUES(765,1,0,474)
COMMIT
/*C13*/SET SCHEMA PUBLIC
INSERT INTO PRODOTTO VALUES(3,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile',474,'Maglietta3',19.99E0,2)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=474
INSERT INTO LOB_IDS VALUES(474,3,1,30)
COMMIT
