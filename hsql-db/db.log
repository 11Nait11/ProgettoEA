/*C13*/SET SCHEMA PUBLIC
drop table if exists image cascade 
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=574
INSERT INTO LOB_IDS VALUES(574,52471,0,30)
DELETE FROM LOB_IDS WHERE LOB_ID=575
INSERT INTO LOB_IDS VALUES(575,14029,0,30)
COMMIT
SET SCHEMA PUBLIC
drop table if exists prodotto cascade 
drop table if exists recensione cascade 
drop table if exists utente cascade 
drop sequence image_seq if exists
drop sequence recensione_seq if exists
drop sequence utente_seq if exists
create sequence image_seq start with 1 increment by 50
create sequence recensione_seq start with 1 increment by 50
create sequence utente_seq start with 1 increment by 50
create table image (id bigint not null, image blob, id_prodotto bigint, primary key (id))
create table prodotto (id bigint generated by default as identity (start with 1), categoria varchar(255), condizione varchar(255), descrizione varchar(255), disponibilita varchar(255), nome_prodotto varchar(255), prezzo float(53) not null, venditore bigint not null, primary key (id))
create table recensione (id bigint not null, commento varchar(255), valutazione integer not null, utente_id bigint not null, prodotto_id bigint not null, primary key (id))
create table utente (id bigint not null, cognome varchar(255), nome varchar(255), primary key (id))
alter table image add constraint FKc6duiw177sgl4thnxxib9fl28 foreign key (id_prodotto) references prodotto
alter table prodotto add constraint FK2kslg4c4wonq14gof16ikj8dx foreign key (venditore) references utente
alter table recensione add constraint FKb77d6048y1xbjljw1aaew6dt9 foreign key (utente_id) references utente
alter table recensione add constraint FKmck9chsellevum9b1nfc51vna foreign key (prodotto_id) references prodotto
INSERT INTO UTENTE VALUES(1,'Bianchi','Paperino')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 51
COMMIT
INSERT INTO UTENTE VALUES(2,'Rossi','Archimede')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 101
COMMIT
INSERT INTO PRODOTTO VALUES(1,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta',19.99E0,1)
COMMIT
INSERT INTO PRODOTTO VALUES(2,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta2',19.99E0,2)
COMMIT
INSERT INTO PRODOTTO VALUES(3,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta3',19.99E0,2)
COMMIT
/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO LOB_IDS VALUES(576,52471,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 577
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=909
INSERT INTO BLOCKS VALUES(909,2,0)
INSERT INTO BLOCKS VALUES(911,2147482736,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=909
INSERT INTO LOBS VALUES(909,2,0,576)
COMMIT
/*C13*/INSERT INTO IMAGE VALUES(1,576,1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=576
INSERT INTO LOB_IDS VALUES(576,52471,1,30)
SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.IMAGE_SEQ RESTART WITH 51
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(577,14029,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 578
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=911
INSERT INTO BLOCKS VALUES(911,1,0)
INSERT INTO BLOCKS VALUES(912,2147482735,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=911
INSERT INTO LOBS VALUES(911,1,0,577)
COMMIT
/*C13*/INSERT INTO IMAGE VALUES(2,577,1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=577
INSERT INTO LOB_IDS VALUES(577,14029,1,30)
SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.IMAGE_SEQ RESTART WITH 101
COMMIT
INSERT INTO RECENSIONE VALUES(1,'bella ma non balla',2,1,1)
ALTER SEQUENCE PUBLIC.RECENSIONE_SEQ RESTART WITH 51
COMMIT
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/SET SCHEMA PUBLIC
DISCONNECT
