/*C12*/SET SCHEMA PUBLIC
drop table if exists image cascade 
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=668
INSERT INTO LOB_IDS VALUES(668,52471,0,30)
DELETE FROM LOB_IDS WHERE LOB_ID=669
INSERT INTO LOB_IDS VALUES(669,14029,0,30)
COMMIT
SET SCHEMA PUBLIC
drop table if exists prodotto cascade 
drop table if exists recensione cascade 
drop table if exists utente cascade 
drop sequence image_seq if exists
drop sequence recensione_seq if exists
drop sequence utente_seq if exists
create sequence image_seq start with 1 increment by 50
create sequence recensione_seq start with 1 increment by 50
create sequence utente_seq start with 1 increment by 50
create table image (id bigint not null, image blob, id_prodotto bigint, primary key (id))
create table prodotto (id bigint generated by default as identity (start with 1), categoria varchar(255), condizione varchar(255), descrizione varchar(255), disponibilita varchar(255), nome_prodotto varchar(255), prezzo float(53) not null, venditore bigint not null, primary key (id))
create table recensione (id bigint not null, commento varchar(255), valutazione integer not null, autore_id bigint not null, utente_recensito_id bigint, primary key (id))
create table utente (id bigint not null, cognome varchar(255), nome varchar(255), primary key (id))
alter table recensione add constraint UKmy46lg79kgetasvwolv80smo6 unique (autore_id, utente_recensito_id)
alter table image add constraint FKc6duiw177sgl4thnxxib9fl28 foreign key (id_prodotto) references prodotto
alter table prodotto add constraint FK2kslg4c4wonq14gof16ikj8dx foreign key (venditore) references utente
alter table recensione add constraint FKtrvpb3er67txo72psquoy7dt8 foreign key (autore_id) references utente
alter table recensione add constraint FK7p1554x9tqr8douqhcug5e2u4 foreign key (utente_recensito_id) references utente
INSERT INTO UTENTE VALUES(1,'Bianchi','Paperino')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 51
COMMIT
INSERT INTO UTENTE VALUES(2,'Rossi','Archimede')
ALTER SEQUENCE PUBLIC.UTENTE_SEQ RESTART WITH 101
COMMIT
INSERT INTO PRODOTTO VALUES(1,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta',19.99E0,1)
COMMIT
INSERT INTO PRODOTTO VALUES(2,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta2',19.99E0,2)
COMMIT
INSERT INTO PRODOTTO VALUES(3,'Abbigliamento','Nuovo','Maglietta in cotone a righe','Disponibile','Maglietta3',19.99E0,2)
COMMIT
/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO LOB_IDS VALUES(670,52471,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 671
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1050
INSERT INTO BLOCKS VALUES(1050,2,0)
INSERT INTO BLOCKS VALUES(1052,2147482595,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1050
INSERT INTO LOBS VALUES(1050,2,0,670)
COMMIT
/*C12*/INSERT INTO IMAGE VALUES(1,670,1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=670
INSERT INTO LOB_IDS VALUES(670,52471,1,30)
SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.IMAGE_SEQ RESTART WITH 51
COMMIT
/*C1*/INSERT INTO LOB_IDS VALUES(671,14029,0,30)
ALTER SEQUENCE SYSTEM_LOBS.LOB_ID RESTART WITH 672
COMMIT
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1052
INSERT INTO BLOCKS VALUES(1052,1,0)
INSERT INTO BLOCKS VALUES(1053,2147482594,0)
DELETE FROM BLOCKS WHERE BLOCK_ADDR=1052
INSERT INTO LOBS VALUES(1052,1,0,671)
COMMIT
/*C12*/INSERT INTO IMAGE VALUES(2,671,1)
SET SCHEMA SYSTEM_LOBS
DELETE FROM LOB_IDS WHERE LOB_ID=671
INSERT INTO LOB_IDS VALUES(671,14029,1,30)
SET SCHEMA PUBLIC
ALTER SEQUENCE PUBLIC.IMAGE_SEQ RESTART WITH 101
COMMIT
INSERT INTO RECENSIONE VALUES(1,'bella ma non balla',2,1,2)
ALTER SEQUENCE PUBLIC.RECENSIONE_SEQ RESTART WITH 51
COMMIT
ALTER SEQUENCE PUBLIC.RECENSIONE_SEQ RESTART WITH 101
INSERT INTO RECENSIONE VALUES(4,'ciao',10,2,1)
COMMIT
INSERT INTO RECENSIONE VALUES(6,'ciao',10,1,1)
COMMIT
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
